<!DOCTYPE html>
<html lang="pt-pt"></html>

<html>
  <head>

    <title>Wix Leaflet Map Example</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    <script src="Leaflet.markercluster-1.4.1"></script>
    <link rel="stylesheet" href="Leaflet.markercluster-1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="Leaflet.markercluster-1.4.1/dist/MarkerCluster.Default.css" />
    <script src="Leaflet.markercluster-1.4.1/dist/leaflet.markercluster-src.js"></script>
    
    <script src="GeoJSON/RDD.geojson"></script>
    <script src="GeoJSON/Flickr.geojson"></script>
    <script src="GeoJSON/Geocaching.geojson"></script>

    <style>
      /* Always set the map height explicitly to define the size of the div
      * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>



  </head>
  


  <body>
    <div id="map">
      <script>
      window.addEventListener("message", receiveMessage, false);
      var map = L.map('map', {
          center: [41.225895, -7.3329045],
          zoom: 10
      });

L.control.scale().addTo(map);




L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar', attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(map);

      

//Dados base------------------------------------------------------------------------------------------------------------------------------------------------------------------------
L.geoJSON(RDD).addTo(map);
//L.geoJSON(geocaching).addTo(map)
//L.geoJSON(Flickr).addTo(map)
//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


//Cluster geocaching----------------------------------------------------------------------------------------------------------------------------------------------------------------
var markers = L.markerClusterGroup();

var geoJsonLayer = L.geoJson(geocaching, {
    onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.address);
    }
});
markers.addLayer(geoJsonLayer);

map.addLayer(markers);
map.fitBounds(markers.getBounds());
//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


//Cluster Flickr----------------------------------------------------------------------------------------------------------------------------------------------------------------
var markers = L.markerClusterGroup();

var geoJsonLayer = L.geoJson(Flickr, {
    onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.address);
    }
});
markers.addLayer(geoJsonLayer);

map.addLayer(markers);
map.fitBounds(markers.getBounds());
//----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

      
function receiveMessage(event) {
    if (!event.origin.includes('wix')) {
        return; 
        }
    const location = event.data;
        map.panTo(location);
        L.marker(location).addTo(map);
        console.log(event);
    }
      </script>
    </div>

  </body>
</html>
